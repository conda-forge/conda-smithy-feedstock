From e47833ca249ce7095041cec2c12265aea4b6ed1b Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Fri, 13 Feb 2026 17:28:53 +1100
Subject: [PATCH 1/4] Revert "fix: unset these env vars"

This reverts commit aa11a27cf282680b1eedeb9de8b1d095d15f7726.
---
 tests/conftest.py | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

diff --git a/tests/conftest.py b/tests/conftest.py
index 4aa4ce2e..feef3416 100644
--- a/tests/conftest.py
+++ b/tests/conftest.py
@@ -57,16 +57,7 @@ def recipe_dirname():
 
 
 @pytest.fixture(scope="function", params=["conda-build", "rattler-build"])
-def config_yaml(testing_workdir, recipe_dirname, request, monkeypatch):
-    # conda-build has legacy behavior where these env vars cause config
-    # objects to have default values for the associated language.
-    # This causes test failures, so we unset them here.
-    monkeypatch.delenv("CONDA_PY", raising=False)
-    monkeypatch.delenv("CONDA_R", raising=False)
-    monkeypatch.delenv("CONDA_PERL", raising=False)
-    monkeypatch.delenv("CONDA_LUA", raising=False)
-    monkeypatch.delenv("CONDA_NPY", raising=False)
-
+def config_yaml(testing_workdir, recipe_dirname, request):
     config = {
         "python": ["2.7", "3.5"],
         "r_base": ["3.3.2", "3.4.2"],
