From b52d0082fca4dd136bc66dedb328d745f6cc0f03 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Fri, 13 Feb 2026 17:35:08 +1100
Subject: [PATCH 4/4] avoid hard dependence on `TEMP` environment variable on
 windows

---
 conda_smithy/configure_feedstock.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/conda_smithy/configure_feedstock.py b/conda_smithy/configure_feedstock.py
index caeb0702..853e7702 100644
--- a/conda_smithy/configure_feedstock.py
+++ b/conda_smithy/configure_feedstock.py
@@ -2719,7 +2719,7 @@ def get_cfp_file_path(temporary_directory):
 
 def get_cache_dir():
     if sys.platform.startswith("win"):
-        return Path(os.environ.get("TEMP"))
+        return Path(os.environ.get("TEMP", Path.home() / ".cache"))
     else:
         return Path(os.environ.get("XDG_CACHE_HOME", Path.home() / ".cache"))
 
